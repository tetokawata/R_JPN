# データ整備: dplyr

- AERパッケージに含まれるNMES1988を利用

```{r}
data("NMES1988",
     package = "AER")

raw <- NMES1988
```

- tidyverseパッケージに含まれるdplyrパッケージ[@R-dplyr]は、有用な関数を提供

```{r}
library(tidyverse)
```

## 新しい変数の作成: mutate

- mutate関数の利用

```{r}
df <- mutate(raw,
             square_age = age^2,
             log_age = log(age),
             total_visit = visits + nvisits + ovisits + novisits
             )
```


## 変数の限定: select

- select関数の利用

```{r}
df <- select(raw,
             age,
             visits
             )
```

- 特定の変数の除外

```{r}
df <- select(raw,
             -age,
             -visits
             )
```

## サンプルの除外:filter

- filter関数の利用

```{r}
df <- filter(raw,
             visits >= 5
             )
```

